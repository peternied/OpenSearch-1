/*
 * SPDX-License-Identifier: Apache-2.0
 *
 * The OpenSearch Contributors require contributions made to
 * this file be licensed under the Apache-2.0 license or a
 * compatible open source license.
 */

configure(subprojects.findAll { it.parent.path == project.path }) {
  group = 'org.opensearch.sandbox.plugin' // for modules which publish client jars
  apply plugin: 'opensearch.testclusters'
  apply plugin: 'opensearch.opensearchplugin'

  opensearchplugin {
    // for local OpenSearch plugins, the name of the plugin is the same as the directory
    name project.name
  }

  if (project.file('src/main/packaging').exists()) {
    throw new InvalidModelException("Modules cannot contain packaging files")
  }
  if (project.file('src/main/bin').exists()) {
    throw new InvalidModelException("Modules cannot contain bin files")
  }
  if (project.file('src/main/config').exists()) {
    throw new InvalidModelException("Modules cannot contain config files")
  }
}
